@model IEnumerable<MVC.Models.Envios.ListadoEnviosVM>

@{
    ViewData["Title"] = "EnviosxComentario";
}

<h1>Envios por Comentario</h1>
<p>
    <a asp-action="MisEnvios" class="btn btn-secondary mb-3">Volver a Mis Envíos</a>
</p>

<form method="get" asp-action="EnviosxComentario" class="mb-3">
    <div class="input-group">
        <input type="text" name="comentario" class="form-control" placeholder="Buscar por comentario..." required />
        <button class="btn btn-primary" type="submit">Buscar</button>
    </div>
</form>

@if (!string.IsNullOrEmpty(ViewBag.Mensaje))
{
    <div class="alert alert-warning">@ViewBag.Mensaje</div>
}

@if (Model != null && Model.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nro Tracking</th>
                <th>Peso</th>
                <th>Funcionario</th>
                <th>Cliente</th>
                <th>Fecha Entrega</th>
                <th>Fecha Estimada</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.NroTracking</td>
                    <td>@item.Peso</td>
                    <td>@item.FuncionarioNombre</td>
                    <td>@item.ClienteNombre</td>
                    <td>@(item.FechaEntrega == DateTime.MinValue ? "No entregado" : item.FechaEntrega.ToString("dd/MM/yyyy"))</td>
                    <td>
                        @(item.FechaEstimada != null && item.FechaEstimada != DateTime.MinValue
                            ? item.FechaEstimada.ToString("dd/MM/yyyy")
                            : "Sin fecha estimada")
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
